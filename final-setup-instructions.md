# üöÄ –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É PressVPN Shop Bot

## ‚úÖ –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã:

### 1. Webhook —á–µ—Ä–µ–∑ Traefik
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–æ–º–µ–Ω `bot.pressvpn.shop` –¥–ª—è webhook'–æ–≤.

### 2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `/bot/handlers/admin/promo/`:
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
  - –ö–æ–¥ (3-30 —Å–∏–º–≤–æ–ª–æ–≤)
  - –ë–æ–Ω—É—Å–Ω—ã–µ –¥–Ω–∏ (1-365)
  - –õ–∏–º–∏—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–π (1-10000)
  - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏
- –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞:

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ Traefik config.yml

```bash
cd /opt/remnawave/traefik
nano config.yml
```

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è bot.pressvpn.shop (–∏–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –≤—ã—à–µ).

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Traefik

```bash
cd /opt/remnawave
docker compose restart traefik
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±–æ—Ç–∞

```bash
mkdir -p /opt/remnawave-tg-shop
cd /opt/remnawave-tg-shop
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª

```bash
nano .env
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏:
- ‚úÖ `BOT_TOKEN` - —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
- ‚úÖ `ADMIN_IDS` - –≤–∞—à Telegram ID
- ‚úÖ `PANEL_API_KEY` - API –∫–ª—é—á –æ—Ç Remnawave
- ‚úÖ `WEBHOOK_BASE_URL=https://bot.pressvpn.shop`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (–ÆKassa –∏–ª–∏ –¥—Ä—É–≥–∏–µ)

### –®–∞–≥ 5: –°–æ–∑–¥–∞–π—Ç–µ docker-compose.yml

```bash
nano docker-compose.yml
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª –∏–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ "–§–∏–Ω–∞–ª—å–Ω—ã–π docker-compose.yml".

### –®–∞–≥ 6: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
# –ó–∞–ø—É—Å–∫
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker compose logs -f remnawave-tg-shop
```

### –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤—ã–±–æ—Ä–æ–º —è–∑—ã–∫–∞

### –®–∞–≥ 8: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/admin`
2. –í—ã —É–≤–∏–¥–∏—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å —Ä–∞–∑–¥–µ–ª–∞–º–∏:
   - üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   - üéü –ü—Ä–æ–º–æ–∫–æ–¥—ã
   - üí≥ –ü–ª–∞—Ç–µ–∂–∏
   - üì¢ –†–∞—Å—Å—ã–ª–∫–∞
   - üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

### –®–∞–≥ 9: –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –ø—Ä–æ–º–æ–∫–æ–¥

1. –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ "üéü –ü—Ä–æ–º–æ–∫–æ–¥—ã"
2. –ù–∞–∂–º–∏—Ç–µ "‚ûï –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥"
3. –°–ª–µ–¥—É–π—Ç–µ –ø–æ—à–∞–≥–æ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
   - –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `WELCOME`)
   - –£–∫–∞–∂–∏—Ç–µ –±–æ–Ω—É—Å–Ω—ã–µ –¥–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 7)
   - –£–∫–∞–∂–∏—Ç–µ –ª–∏–º–∏—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä: 100)
   - –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è

### –®–∞–≥ 10: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–µ–±—Ö—É–∫–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

**–î–ª—è –ÆKassa:**
1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ÆKassa
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
3. URL: `https://bot.pressvpn.shop/webhook/yookassa`
4. –°–æ–±—ã—Ç–∏—è: payment.succeeded, payment.canceled

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook'–æ–≤:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ webhook URL
curl -I https://bot.pressvpn.shop/webhook/yookassa

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ webhook –∑–∞–ø—Ä–æ—Å–æ–≤
docker compose logs remnawave-tg-shop | grep webhook
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å Remnawave:
```bash
# –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –±–æ—Ç–∞ –≤—ã–±–µ—Ä–∏—Ç–µ "üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è"
# –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é"
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose logs -f remnawave-tg-shop | grep sync
```

## üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:

### 1. –¢–µ—Å—Ç –ø—Ä–æ–º–æ–∫–æ–¥–∞:
- –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç (–¥—Ä—É–≥–æ–π Telegram)
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ —á–µ—Ä–µ–∑ "üéü –í–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–æ–∫–æ–¥"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–Ω—ã—Ö –¥–Ω–µ–π

### 2. –¢–µ—Å—Ç –ø—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞:
- –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí `/start`
- –í—ã–±–µ—Ä–∏—Ç–µ "üéÅ –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ 3 –¥–Ω—è

### 3. –¢–µ—Å—Ç –æ–ø–ª–∞—Ç—ã:
- –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ
- –û–ø–ª–∞—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ –ÆKassa
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps | grep remnawave-tg-shop

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats remnawave-tg-shop remnawave-tg-shop-db

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
docker compose logs --tail=100 remnawave-tg-shop

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker compose exec remnawave-tg-shop-db psql -U postgres -d pressvpn_shop -c "SELECT COUNT(*) FROM users;"
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ VPN –ø–æ–¥–ø–∏—Å–æ–∫ —Å:
- üéü –°–∏—Å—Ç–µ–º–æ–π –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
- üéÅ –ü—Ä–æ–±–Ω—ã–º –ø–µ—Ä–∏–æ–¥–æ–º
- üí≥ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–ø–ª–∞—Ç–æ–π
- üë• –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π
- üìä –ü–æ–ª–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —Å Remnawave

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `BOT_TOKEN` –≤ .env
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs remnawave-tg-shop`

2. **–û—à–∏–±–∫–∞ "API key invalid":**
   - –ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—å—Ç–µ `PANEL_API_KEY`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∫–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω –≤ Remnawave

3. **Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å https://bot.pressvpn.shop
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Traefik config.yml
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏

–£–¥–∞—á–∏ —Å –∑–∞–ø—É—Å–∫–æ–º! üöÄ